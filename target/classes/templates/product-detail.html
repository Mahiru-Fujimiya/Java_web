<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <title>Chi ti·∫øt s·∫£n ph·∫©m</title>

    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">

    <style>
        .product-img-big {
            width: 100%;
            max-height: 380px;
            object-fit: contain;
            border-radius: 10px;
            background: #f5f5f5;
        }

        .card {
            border-radius: 12px;
        }

        .price {
            font-size: 28px;
            font-weight: bold;
            color: #dc3545;
        }
    </style>
</head>

<body>

<div class="container py-4">

    <a href="/products" class="btn btn-secondary mb-3">‚¨Ö Quay l·∫°i danh s√°ch</a>

    <div class="row">

        <!-- LEFT: IMAGE -->
        <div class="col-md-5">
            <img id="img" class="product-img-big" src="https://via.placeholder.com/400" alt="Product">
        </div>

        <!-- RIGHT: INFO -->
        <div class="col-md-7">
            <div class="card shadow p-4">

                <h2 id="name"></h2>

                <div class="price mt-2" id="price"></div>

                <hr>

                <p><strong>M√¥ t·∫£:</strong></p>
                <p id="description"></p>

                <p class="mt-3"><strong>Danh m·ª•c:</strong> <span id="category"></span></p>
                <p><strong>S·ªë l∆∞·ª£ng c√≤n:</strong> <span id="quantity"></span></p>

                <hr>

                <div class="mt-3">
                    <button class="btn btn-primary">üõí Th√™m v√†o gi·ªè</button>
                    <button class="btn btn-warning" onclick="editProduct()">‚úè S·ª≠a s·∫£n ph·∫©m</button>
                </div>

            </div>
        </div>

    </div>
</div>

<script>
    async function loadDetail() {
        const productId = window.location.pathname.split("/").pop();

        let res = await fetch(`/products/${productId}`);
        let data = await res.json();

        document.getElementById("name").innerText = data.name;
        document.getElementById("price").innerText = data.price.toLocaleString() + " ‚Ç´";
        document.getElementById("img").src = data.imageUrl || "https://via.placeholder.com/400";
        document.getElementById("description").innerText = data.description ?? "Kh√¥ng c√≥ m√¥ t·∫£";
        document.getElementById("quantity").innerText = data.quantity;
        document.getElementById("category").innerText = data.categoryId;
    }

    function editProduct() {
        const id = window.location.pathname.split("/").pop();
        window.location.href = `/products/edit/${id}`;
    }

    loadDetail();
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
